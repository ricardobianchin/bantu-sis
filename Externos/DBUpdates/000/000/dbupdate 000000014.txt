MODULO

DBATUALIZ INI
DBATUALIZ_ASSUNTO=MODULO
DBATUALIZ_OBJETIVO=CRIA MODULO, MODULO_PA
DBATUALIZ_OBS=


//TABELA MODULO

COMANDO INI
TIPO_COMANDO=CREATE TABLE
OBJETO_NOME=MODULO

COLUNAS INI
//NOME;TIPO;NOT NULL;PRIM

MODULO_ID;ID_CHAR_DOM;S;S
DESCR;NOME_CURTO_NOTN_DOM

COLUNAS FIM
COMANDO FIM

//TABELA MODULO FIM



//TABELA ATIV_SIS_OFERECE_MODULO

COMANDO INI
TIPO_COMANDO=CREATE TABLE
OBJETO_NOME=ATIV_SIS_OFERECE_MODULO

COLUNAS INI
//NOME;TIPO;NOT NULL;PRIM

ATIV_SIS_ID;ID_CHAR_DOM;S;S
MODULO_ID;ID_CHAR_DOM;S;S

COLUNAS FIM
COMANDO FIM

//TABELA ATIV_SIS_OFERECE_MODULO FIM



//////////////////////////////////
//
// FOREIGN KEY ATIV_SIS ATIV_SIS_OFERECE_MODULO
//
//////////////////////////////////
COMANDO INI
TIPO_COMANDO=CREATE FOREIGN KEY
//OBJETO_NOME=
TABELA_FK=ATIV_SIS_OFERECE_MODULO
CAMPOS_FK=ATIV_SIS_ID
TABELA_PK=ATIV_SIS
//CAMPOS_PK=
COMANDO FIM
//OBJETO_NOME e CAMPOS_PK nao sao obrigatorios
// FOREIGN KEY ATIV_SIS ATIV_SIS_OFERECE_MODULO FIM



//////////////////////////////////
//
// FOREIGN KEY MODULO ATIV_SIS_OFERECE_MODULO
//
//////////////////////////////////
COMANDO INI
TIPO_COMANDO=CREATE FOREIGN KEY
//OBJETO_NOME=
TABELA_FK=ATIV_SIS_OFERECE_MODULO
CAMPOS_FK=MODULO_ID
TABELA_PK=MODULO
//CAMPOS_PK=
COMANDO FIM
//OBJETO_NOME e CAMPOS_PK nao sao obrigatorios
// FOREIGN KEY MODULO ATIV_SIS_OFERECE_MODULO FIM



//PACKAGE MODULO_PA

COMANDO INI
TIPO_COMANDO=CREATE OR ALTER PACKAGE
OBJETO_NOME=MODULO_PA

```FIREBIRD
SET TERM ^;
CREATE OR ALTER PACKAGE MODULO_PA
AS
BEGIN
  PROCEDURE MODULOS_DA_ATIV_SIS_GET
  (
    ATIV_SIS_ID CHAR
  )
  RETURNS
  (
   MODULO_ID_RET CHAR
   , MODULO_DESCR_RET NOME_CURTO_DOM
  );
  
END^

RECREATE PACKAGE BODY MODULO_PA
AS
BEGIN
  PROCEDURE MODULOS_DA_ATIV_SIS_GET
  (
   ATIV_SIS_ID CHAR
  )
  RETURNS
  (
   MODULO_ID_RET CHAR
   , MODULO_DESCR_RET NOME_CURTO_DOM
  ) 
  AS
  BEGIN
    FOR SELECT M.MODULO_ID, M.DESCR 
    FROM MODULO M
    JOIN ATIV_SIS_OFERECE_MODULO OFER ON
    OFER.ATIV_SIS_ID = :ATIV_SIS_ID
    AND M.MODULO_ID = OFER.MODULO_ID
    INTO :MODULO_ID_RET, :MODULO_DESCR_RET 
    DO 
    SUSPEND; 
  END
END^
SET TERM ;^
```
COMANDO FIM

//PACKAGE ATIV_SIS_PA FIM

DBATUALIZ FIM
