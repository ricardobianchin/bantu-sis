IMPORT_PROD

//INICIO
-----------------------------
DBATUALIZ INI
DBATUALIZ_ASSUNTO=CRIA IMPORTACAO PROD
DBATUALIZ_OBJETIVO=CRIA IMPORT_PROD E IMPORT_PROD_PA
DBATUALIZ_OBS=




// PACKAGE 
COMANDO INI
TIPO_COMANDO=CREATE OR ALTER PACKAGE
OBJETO_NOME=IMPORT_PROD_PA

/*
Complementos\Est\prod_pa.txt

C:\Pr\app\bantu\bantu-sis\Src\Externos\DBUpdates Complementos\Complementos\Config\
C:\Pr\app\bantu\bantu-sis\Src\Externos\DBUpdates Complementos\Complementos\Config\import_prod_pa.sql
in "C:\Pr\app\bantu\bantu-sis\Src\Externos\DBUpdates Complementos\Complementos\Config\import_prod_pa.sql";
*/

```FIREBIRD
SET TERM ^;
CREATE OR ALTER PACKAGE IMPORT_PROD_PA
AS
BEGIN
  PROCEDURE APAGAR_DO;
END^

----- body -----

RECREATE PACKAGE BODY IMPORT_PROD_PA
AS
BEGIN
  PROCEDURE APAGAR_DO
  AS
  BEGIN
    DELETE FROM PROD_BARRAS;
    DELETE FROM PROD_COMPL;

    DELETE FROM PROD_CUSTO;
    DELETE FROM PROD_CUSTO_HIST;

    DELETE FROM PROD_PRECO;
    DELETE FROM PROD_PRECO_HIST;
    --DELETE FROM PROD_PRECO_TABELA;

    DELETE FROM PROD;
    EXECUTE STATEMENT('ALTER SEQUENCE PROD_SEQ RESTART WITH  1;');

    DELETE FROM LOG_PK;
    DELETE FROM LOG;

    DELETE FROM FABR WHERE FABR_ID > 0;
    DELETE FROM PROD_TIPO WHERE PROD_TIPO_ID > 0;
    DELETE FROM ICMS WHERE ICMS_ID > 3;
    DELETE FROM UNID WHERE UNID_ID > 0;

    EXECUTE STATEMENT('ALTER SEQUENCE FABR_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE PROD_TIPO_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE UNID_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE ICMS_SEQ RESTART WITH  4;');

    
    DELETE FROM IMPORT_PROD_CONFLITO;
    DELETE FROM IMPORT_PROD;
    DELETE FROM IMPORT_FABR;

    EXECUTE STATEMENT('ALTER SEQUENCE LOG_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE MACHINE_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE PESSOA_SEQ RESTART WITH  1;');
    

    DELETE FROM IMPORT_FABR;
    DELETE FROM IMPORT_PROD_TIPO;
    DELETE FROM IMPORT_UNID;
    DELETE FROM IMPORT_ICMS;
    DELETE FROM IMPORT_PROD;
    DELETE FROM IMPORT_PROD_BARRAS;
    DELETE FROM IMPORT_PROD_PRECO;
    DELETE FROM IMPORT_PROD_CONFLITO;

    EXECUTE STATEMENT('ALTER SEQUENCE IMPORT_FABR_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE IMPORT_PROD_TIPO_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE IMPORT_UNID_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE IMPORT_ICMS_SEQ RESTART WITH  1;');
    EXECUTE STATEMENT('ALTER SEQUENCE IMPORT_PROD_SEQ RESTART WITH  1;');
  END
END^
SET TERM ;^
```
COMANDO FIM

DBATUALIZ FIM
