MODULO

DBATUALIZ INI
DBATUALIZ_ASSUNTO=MODULO
DBATUALIZ_OBJETIVO=CRIA MODULO, MODULO_PA
DBATUALIZ_OBS=


//TABELA MODULO

COMANDO INI
TIPO_COMANDO=CREATE TABLE
OBJETO_NOME=MODULO

COLUNAS INI
//NOME;TIPO;NOT NULL;PRIM

MODULO_ID;ID_CHAR_DOM;N;S
DESCR;NOME_CURTO_NOTN_DOM

COLUNAS FIM
COMANDO FIM

//TABELA MODULO FIM



//TABELA ATIVIDADE_OFERECE_MODULO

COMANDO INI
TIPO_COMANDO=CREATE TABLE
OBJETO_NOME=ATIVIDADE_OFERECE_MODULO

COLUNAS INI
//NOME;TIPO;NOT NULL;PRIM

ATIVIDADE_ID;ID_CHAR_DOM;N;S
MODULO_ID;ID_CHAR_DOM;N;S

COLUNAS FIM
COMANDO FIM

//TABELA ATIVIDADE_OFERECE_MODULO FIM



//////////////////////////////////
//
// FOREIGN KEY ATIVIDADE ATIVIDADE_OFERECE_MODULO
//
//////////////////////////////////
COMANDO INI
TIPO_COMANDO=CREATE FOREIGN KEY
//OBJETO_NOME=
TABELA_FK=ATIVIDADE_OFERECE_MODULO
CAMPOS_FK=ATIVIDADE_ID
TABELA_PK=ATIVIDADE
//CAMPOS_PK=
COMANDO FIM
//OBJETO_NOME e CAMPOS_PK nao sao obrigatorios
// FOREIGN KEY ATIVIDADE ATIVIDADE_OFERECE_MODULO FIM



//////////////////////////////////
//
// FOREIGN KEY MODULO ATIVIDADE_OFERECE_MODULO
//
//////////////////////////////////
COMANDO INI
TIPO_COMANDO=CREATE FOREIGN KEY
//OBJETO_NOME=
TABELA_FK=ATIVIDADE_OFERECE_MODULO
CAMPOS_FK=MODULO_ID
TABELA_PK=MODULO
//CAMPOS_PK=
COMANDO FIM
//OBJETO_NOME e CAMPOS_PK nao sao obrigatorios
// FOREIGN KEY MODULO ATIVIDADE_OFERECE_MODULO FIM



//PACKAGE MODULO_PA

COMANDO INI
TIPO_COMANDO=CREATE OR ALTER PACKAGE
OBJETO_NOME=MODULO_PA

```FIREBIRD
SET TERM ^;
CREATE OR ALTER PACKAGE MODULO_PA
AS
BEGIN
  PROCEDURE MODULOS_DA_ATIV_GET
  (
    ATIVIDADE_ID CHAR
  )
  RETURNS
  (
   MODULO_ID CHAR
   , MODULO_DESCR NOME_CURTO_DOM
  );
  
END^

RECREATE PACKAGE BODY MODULO_PA
AS
BEGIN
  PROCEDURE MODULOS_DA_ATIV_GET
  (
   ATIVIDADE_ID CHAR
  )
  RETURNS
  (
   MODULO_ID CHAR
   , MODULO_DESCR NOME_CURTO_DOM
  )
  AS
  BEGIN
    FOR SELECT M.MODULO_ID, M.DESCR 
    FROM MODULO M
    JOIN ATIVIDADE_OFERECE_MODULO OFER ON
    OFER.ATIVIDADE_ID = :ATIVIDADE_ID
    AND M.MODULO_ID = OFER.MODULO_ID
    INTO :MODULO_ID, :MODULO_DESCR 
    DO 
    SUSPEND; 
  END
END^
SET TERM ;^
```
COMANDO FIM

//PACKAGE ATIVIDADE_PA FIM

DBATUALIZ FIM
