RETAG PROD ED
RETAG_PROD_ED_PA
--------------
DBATUALIZ INI
DBATUALIZ_ASSUNTO=RETAG PROD ED
DBATUALIZ_OBJETIVO=RETAG PROD ED
DBATUALIZ_OBS=




//PACKAGE RETAG_PROD_ED_PA

COMANDO INI
TIPO_COMANDO=CREATE OR ALTER PACKAGE
OBJETO_NOME=RETAG_PROD_ED_PA
```FIREBIRD
SET TERM ^;
CREATE OR ALTER PACKAGE RETAG_PROD_ED_PA
AS
BEGIN
  PROCEDURE ITEMS_GET
  RETURNS 
  (
    REGTIPO SMALLINT,
    ID_RET SMALLINT,
    DESCR_RET VARCHAR(40)
  );

  PROCEDURE FABR_DESCRS_EXISTENTES_GET 
  (
    PROD_ID_EXCETO INTEGER NOT NULL,
    FABR_ID SMALLINT NOT NULL,
    DESCR VARCHAR(120) NOT NULL,
    DESCR_RED VARCHAR(29) NOT NULL
  )
  RETURNS 
  (
    PROD_ID_RET INTEGER,
    DESCR_RET VARCHAR(120),
    DESCR_RED_RET VARCHAR(29)
  );
END^

RECREATE PACKAGE BODY RETAG_PROD_ED_PA
AS
BEGIN
  PROCEDURE ITEMS_GET
  RETURNS 
  (
    REGTIPO SMALLINT,
    ID_RET SMALLINT,
    DESCR_RET VARCHAR(40)
  )
  AS
  BEGIN
    FOR SELECT REGTIPO, ID_RET, DESCR_RET FROM FABR_PA.LISTA_SELECT_GET WHERE ID_RET > 0
    INTO :REGTIPO, :ID_RET, :DESCR_RET DO
    BEGIN
      SUSPEND;
    END

    FOR SELECT REGTIPO, ID_RET, DESCR_RET FROM PROD_TIPO_PA.LISTA_SELECT_GET WHERE ID_RET > 0
    INTO :REGTIPO, :ID_RET, :DESCR_RET DO
    BEGIN
      SUSPEND;
    END

    FOR SELECT REGTIPO, ID_RET, DESCR_RET FROM UNID_PA.LISTA_SELECT_GET WHERE ID_RET > 0
    INTO :REGTIPO, :ID_RET, :DESCR_RET DO
    BEGIN
      SUSPEND;
    END

    FOR SELECT REGTIPO, ID_RET, DESCR_RET FROM ICMS_PA.LISTA_SELECT_GET WHERE ID_RET > 0
    INTO :REGTIPO, :ID_RET, :DESCR_RET DO
    BEGIN
      SUSPEND;
    END
  END

  PROCEDURE FABR_DESCRS_EXISTENTES_GET 
  (
    PROD_ID_EXCETO INTEGER NOT NULL,
    FABR_ID SMALLINT NOT NULL,
    DESCR VARCHAR(120) NOT NULL,
    DESCR_RED VARCHAR(29) NOT NULL
  )
  RETURNS 
  (
    PROD_ID_RET INTEGER,
    DESCR_RET VARCHAR(120),
    DESCR_RED_RET VARCHAR(29)
  )
  AS
  BEGIN
    FOR 
      SELECT PROD_ID, DESCR, DESCR_RED
      FROM PROD
      WHERE FABR_ID = :FABR_ID 
      AND (DESCR = :DESCR OR DESCR_RED = :DESCR_RED)
      AND (PROD_ID <> :PROD_ID_EXCETO)
      INTO :PROD_ID_RET, :DESCR_RET, :DESCR_RED_RET
      DO
        SUSPEND;
  END
END^
/*
select * from prod;
*/
SET TERM ;^
```
COMANDO FIM
//PACKAGE PROD_BARRAS_PA FIM

DBATUALIZ FIM


