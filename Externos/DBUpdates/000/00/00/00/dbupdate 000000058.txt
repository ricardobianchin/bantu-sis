PAGAMENTOS, FORMAS DE PAGAMENTO, INICIAL
PAGAMENTOS, FORMAS DE PAGAMENTO

--------
DBATUALIZ INI
DBATUALIZ_ASSUNTO=PAGAMENTOS, FORMAS DE PAGAMENTO
DBATUALIZ_OBJETIVO=CRIAR TABELA PAGAMENTO_FORMA
DBATUALIZ_OBS=



///////////////////////////////////////////
// SEQUENCE PAGAMENTO_FORMA_SEQ
///////////////////////////////////////////
COMANDO INI
COMANDO_PONTO_ALVO=SERVIDOR
COMANDO_TIPO=CREATE SEQUENCE
OBJETO_NOME=PAGAMENTO_FORMA_SEQ
VALOR_INICIAL=3
COMANDO FIM
// SEQUENCE PAGAMENTO_FORMA_SEQ FIM






///////////////////////////////////////////
// TABELA PAGAMENTO_FORMA
///////////////////////////////////////////
COMANDO INI
COMANDO_TIPO=CREATE TABLE
OBJETO_NOME=PAGAMENTO_FORMA

COLUNAS INI
//NOME;TIPO;NOT NULL;PRIM;UNIQUE

//NOME    TIPO    NOTNULL    PRIM    UNIQUE
PAGAMENTO_FORMA_ID;ID_DOM;S;S
PAGAMENTO_FORMA_TIPO_ID;ID_CHAR_DOM;S
DESCR;NOME_INTERM_DOM;S
DESCR_RED;CHAR(8);S
ATIVO;BOOLEAN;S
PARA_VENDA;BOOLEAN;S
DE_SISTEMA;BOOLEAN;S
PROMOCAO_PERMITE;BOOLEAN;S
COMISSAO_PERMITE;BOOLEAN;S
TAXA_ADM_PERC;PERC_DOM;S
VALOR_MINIMO;PRECO_DOM;S
COMISSAO_ABATER_PERC;PERC_DOM;S
REEMBOLSO_DIAS;SMALLINT;S
TEF_USA;BOOLEAN;S
AUTORIZACAO_EXIGE;BOOLEAN;S
PESSOA_EXIGE;BOOLEAN;S
A_VISTA;BOOLEAN;S
//ACEITA_TROCO;BOOLEAN DEFAULT FALSE;S

COLUNAS FIM
COMANDO FIM
//TABELA PAGAMENTO_FORMA_TIPO FIM





///////////////////////////////////////////
// FOREIGN KEY PAGAMENTO_FORMA PAGAMENTO_FORMA_TIPO
///////////////////////////////////////////
COMANDO INI
COMANDO_TIPO=CREATE FOREIGN KEY
//OBJETO_NOME=
TABELA_FK=PAGAMENTO_FORMA
CAMPOS_FK=PAGAMENTO_FORMA_TIPO_ID
TABELA_PK=PAGAMENTO_FORMA_TIPO
//CAMPOS_PK=
COMANDO FIM
//OBJETO_NOME e CAMPOS_PK nao sao obrigatorios
// FOREIGN KEY PAGAMENTO_FORMA PAGAMENTO_FORMA_TIPO







///////////////////////////
//PACKAGE PAGAMENTO_FORMA_PA
///////////////////////////
COMANDO INI
COMANDO_TIPO=CREATE OR ALTER PACKAGE
OBJETO_NOME=PAGAMENTO_FORMA_PA
```FIREBIRD
/*---------
NAO ALTERAR AQUI, MAS, NO ARQLUIVO:
Complementos\PAGAMENTO\pagamento_forma_pa.sql
C:\Pr\app\bantu\bantu-sis\Src\Externos\DBUpdates\000\000\Complementos\Fin\pagamento_forma_pa.sql
IN C:\Pr\app\bantu\bantu-sis\Src\Externos\DBUpdates\000\000\Complementos\Fin\pagamento_forma_pa.sql;
*/---------

SET TERM ^;
CREATE OR ALTER PACKAGE PAGAMENTO_FORMA_PA
AS
BEGIN
  PROCEDURE LISTA_GET
  RETURNS
  (
    FORMA_ID ID_SHORT_DOM
    , FORMA_TIPO_DESCR NOME_INTERM_DOM
    , DESCR NOME_INTERM_DOM
    , DESCR_RED CHAR(8)
    , PARA_VENDA BOOLEAN
    , ATIVO BOOLEAN
  );

END^

------ BODY ------

RECREATE PACKAGE BODY PAGAMENTO_FORMA_PA
AS
BEGIN
  PROCEDURE LISTA_GET
  RETURNS
  (
    FORMA_ID ID_SHORT_DOM
    , FORMA_TIPO_DESCR NOME_INTERM_DOM
    , DESCR NOME_INTERM_DOM
    , DESCR_RED CHAR(8)
    , PARA_VENDA BOOLEAN
    , ATIVO BOOLEAN
  )
  AS
  BEGIN
    FOR
    WITH F AS (
      SELECT PAGAMENTO_FORMA_ID ID, PAGAMENTO_FORMA_TIPO_ID TIPO_ID,
        DESCR, DESCR_RED, PARA_VENDA, ATIVO
      FROM PAGAMENTO_FORMA  
    ),
    FT AS (
      SELECT PAGAMENTO_FORMA_TIPO_ID TIPO_ID, DESCR
      FROM PAGAMENTO_FORMA_TIPO
    )
    SELECT F.ID, FT.DESCR,
      F.DESCR, F.DESCR_RED, F.PARA_VENDA, F.ATIVO
    FROM F
    JOIN FT ON F.TIPO_ID = FT.TIPO_ID
    ORDER BY F.TIPO_ID, F.ID
    INTO :FORMA_ID, :FORMA_TIPO_DESCR, :DESCR, :DESCR_RED,
      :PARA_VENDA, :ATIVO
    DO SUSPEND; 
  END
END^
SET TERM ;^

```
COMANDO FIM
//PACKAGE PAGAMENTO_FORMA_PA FIM

DBATUALIZ FIM
