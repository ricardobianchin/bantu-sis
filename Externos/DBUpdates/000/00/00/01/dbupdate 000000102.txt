VENDA_PAG_INICIAL_PA

"C:\PROGRAM FILES\NOTEPAD++\NOTEPAD++.EXE" "C:\PR\APP\BANTU\BANTU-SIS\SRC\EXTERNOS\DBUPDATES\000\00\00\01\DBUPDATE 000000100.TXT"

SELECT DBUPDATE_PA.VERSAO_GET() FROM RDB$DATABASE;

DROP PACKAGE VENDA_PAG_INICIAL_PA;
DELETE FROM DBUPDATE_HIST WHERE NUM>=100;
COMMIT;



/*

C:\PR\APP\BANTU\BANTU-SIS\SRC\EXTERNOS\DBUPDATES COMPLEMENTOS\COMPLEMENTOS\FIN
C:\PR\APP\BANTU\BANTU-SIS\SRC\EXTERNOS\DBUPDATES COMPLEMENTOS\COMPLEMENTOS\FIN\VENDA_PAG_INICIAL_PA.SQL

"C:\PROGRAM FILES\NOTEPAD++\NOTEPAD++.EXE" "C:\PR\APP\BANTU\BANTU-SIS\SRC\EXTERNOS\DBUPDATES COMPLEMENTOS\COMPLEMENTOS\FIN\VENDA_PAG_INICIAL_PA.SQL"

IN "C:\PR\APP\BANTU\BANTU-SIS\SRC\EXTERNOS\DBUPDATES COMPLEMENTOS\COMPLEMENTOS\FIN\VENDA_PAG_INICIAL_PA.SQL";


*/




-----------------------------
INICIO
-----------------------------
DBATUALIZ INI
DBATUALIZ_ASSUNTO=FINANCEIRO
DBATUALIZ_OBJETIVO=CRIAR VENDA_PAG_INICIAL_PA
DBATUALIZ_PONTO_ALVO=SERVIDOR
DBATUALIZ_OBS=




/////////////////////////
//
// PACKAGE VENDA_PAG_INICIAL_PA
//
/////////////////////////
COMANDO INI
COMANDO_TIPO=CREATE OR ALTER PACKAGE
OBJETO_NOME=VENDA_PAG_INICIAL_PA

```FIREBIRD
SET TERM ^;
CREATE OR ALTER PACKAGE VENDA_PAG_INICIAL_PA
AS
BEGIN
  PROCEDURE VENDA_PAG_GAR
  (
    LOJA_ID ID_SHORT_DOM NOT NULL,
    TERMINAL_ID ID_SHORT_DOM NOT NULL,
    EST_MOV_ID BIGINT NOT NULL,
    ORDEM SMALLINT NOT NULL,
    PAGAMENTO_FORMA_ID ID_DOM NOT NULL,
    VALOR_DEVIDO NUMERIC(12, 2) NOT NULL,
    VALOR_ENTREGUE NUMERIC(12, 2) NOT NULL,
    TROCO NUMERIC(12, 2) NOT NULL,
    CANCELADO BOOLEAN NOT NULL
  );
END^

---- BODY

RECREATE PACKAGE BODY VENDA_PAG_INICIAL_PA
AS
BEGIN
  PROCEDURE VENDA_PAG_GAR
  (
    LOJA_ID ID_SHORT_DOM NOT NULL,
    TERMINAL_ID ID_SHORT_DOM NOT NULL,
    EST_MOV_ID BIGINT NOT NULL,
    ORDEM SMALLINT NOT NULL,
    PAGAMENTO_FORMA_ID ID_DOM NOT NULL,
    VALOR_DEVIDO NUMERIC(12, 2) NOT NULL,
    VALOR_ENTREGUE NUMERIC(12, 2) NOT NULL,
    TROCO NUMERIC(12, 2) NOT NULL,
    CANCELADO BOOLEAN NOT NULL
  )
  AS
  BEGIN
    UPDATE OR INSERT INTO VENDA_PAG
    (
      LOJA_ID,
      TERMINAL_ID,
      EST_MOV_ID,
      ORDEM,
      PAGAMENTO_FORMA_ID,
      VALOR_DEVIDO,
      VALOR_ENTREGUE,
      TROCO,
      CANCELADO
    )
    VALUES
    (
      :LOJA_ID,
      :TERMINAL_ID,
      :EST_MOV_ID,
      :ORDEM,
      :PAGAMENTO_FORMA_ID,
      :VALOR_DEVIDO,
      :VALOR_ENTREGUE,
      :TROCO,
      :CANCELADO
    )
    MATCHING (LOJA_ID, TERMINAL_ID, EST_MOV_ID, ORDEM);
  END
END^
SET TERM ;^
```
COMANDO FIM

DBATUALIZ FIM
